<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Главная</title>
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function (m, e, t, r, i, k, a) {
            m[i] = m[i] || function () {
                (m[i].a = m[i].a || []).push(arguments)
            };
            m[i].l = 1 * new Date();
            k = e.createElement(t), a = e.getElementsByTagName(t)[0], k.async = 1, k.src = r, a.parentNode.insertBefore(k, a)
        })
        (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

        ym(51775679, "init", {
            id: 51775679,
            clickmap: true,
            trackLinks: true,
            accurateTrackBounce: true,
            webvisor: true
        });
    </script>
    <noscript>
        <div><img alt="" src="https://mc.yandex.ru/watch/51775679" style="position:absolute; left:-9999px;"/></div>
    </noscript>
    <!-- /Yandex.Metrika counter -->
    <link href="lib/css/bootstrap.css" rel="stylesheet">
    <script src="lib/js/jquery-3.3.1.js" type="text/javascript"></script>
    <script src="lib/js/bootstrap.js" type="text/javascript"></script>
    <script src="https://api-maps.yandex.ru/2.1/?apikey=d2bbfa63-55bb-4820-8846-7aa556d6e3d3&lang=ru_RU"
            type="text/javascript"></script>
    <script type="text/javascript">

        ymaps.ready(init);

        function init() {
            let map = new ymaps.Map("map", {
                // Координаты центра карты.
                // Порядок по умолчанию: «широта, долгота».
                // Чтобы не определять координаты центра карты вручную,
                // воспользуйтесь инструментом Определение координат.
                center: [53.2, 50.15],
                // Уровень масштабирования. Допустимые значения:
                // от 0 (весь мир) до 19.
                zoom: 10
            });

            let searchControl = new ymaps.control.SearchControl({
                options: {
                    boundedBy: map.getBounds(),
                    strictBounds: true,
                    useMapBounds: true
                }
            });
            map.controls.remove('searchControl');
            map.controls.add(searchControl);
            addGeoObject(map);
        }

        function addGeoObject(map) {
            let stops = JSON.parse(localStorage.getItem('fullStops'));
            $(stops).each(function (i, stop) {
                let geoObject = new ymaps.GeoObject({
                    geometry: {
                        type: "Point",
                        coordinates: [stop.latitude, stop.longitude]
                    },
                    // Свойства.
                    properties: {
                        /*iconContent: stop.title,*/
                        hintContent: stop.title
                    }
                });
                map.geoObjects.add(geoObject);
            });
        }

    </script>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <a class="navbar-brand" href="#">TransportRouter</a>
    <button aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"
            class="navbar-toggler"
            data-target="#navbarSupportedContent" data-toggle="collapse" type="button">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <a class="nav-link" href="#">Главная</a>
            </li>
            <li class="nav-item dropdown">
                <a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown"
                   href="#" id="navbarDropdownMenuLink">
                    Справочники
                </a>
                <div aria-labelledby="navbarDropdownMenuLink" class="dropdown-menu">
                    <a class="dropdown-item" href="stops.html">Остановки</a>
                    <a class="dropdown-item" href="routes.html">Маршруты</a>
                </div>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="arrival.html">Данные о прибытии</a>
            </li>
        </ul>
    </div>
</nav>
<div class="ml-5 mt-5 mr-5 mb-5">
    <div class="text-body">
        <h1 class="display-5">Маршрутизатор общественного транспорта Самары</h1>
    </div>
</div>
<div class="d-flex justify-content-center">
    <div id="map" style="width: 800px; height: 600px"></div>
</div>
</body>
</html>